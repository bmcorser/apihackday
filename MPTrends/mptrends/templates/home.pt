<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>MPTrends</title>
    <link href='http://fonts.googleapis.com/css?family=Economica:400,400italic,700,700italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="static/css/graph.css">
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
        google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(drawChart);
        function drawChart(e,query) {
            if(typeof(query) == 'undefined'){
                 query = ['uk',10251,10358,11506];
            }

            var url = 	'/json/chart/'+query.join('/');

            var json = $.ajax({
                url: url,
                dataType : 'json',
                async: false
            }).responseText;

            var data = google.visualization.arrayToDataTable(eval(json));

            var options = {
                title: 'MPTrends'
            };
 
            var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
            chart.draw(data, options);
        }
        $(document).ready(function(){
            var mplist = eval($.ajax({
                url: '/json/mplist',
                dataType: 'json',
                async: false
            }).responseText);
            for(i=0;i<mplist.length;i++){
                var mp = mplist[i];
                $('<div/>').text(mp.name+' ('+ mp.party+')')
                    .attr({'id':mp.member_id})
                    .appendTo($('#mp_list'))
                    .click(function(){
                        //add to selected
                    });
            }
        });
   </script>
</head>
<body>
  <div id="wrapper">
    <div id="chart_div"></div>
    <div id="list_div">
      <input type="text" id="search_input"><button id="search_button">Search</button>
      <div id="mp_list"></div>
    </div>
  </div>
</body>
</html>


